---
- name: Check configuration correctness
  ansible.builtin.include_tasks: configuration_check.yml

- name: Check OS Support
  ansible.builtin.include_tasks: os_support.yml

- name: Install Operating System Components
  ansible.builtin.include_tasks: os.yml
  when: not tas_single_node_skip_os_install

- name: Install Cockpit
  ansible.builtin.include_role:
    name: redhat.rhel_system_roles.cockpit
  vars:
    cockpit_packages: "{{ tas_single_node_cockpit.cockpit_packages }}"
    cockpit_manage_firewall: "{{ tas_single_node_cockpit.cockpit_manage_firewall }}"
    cockpit_port: "{{ tas_single_node_cockpit.cockpit_port }}"
  when: tas_single_node_cockpit.enabled | bool

- name: Create Certificates
  ansible.builtin.include_tasks: certificates.yml

- name: Execute Podman Actions
  ansible.builtin.include_tasks: podman.yml
